((function(){if(!this.require){var a={},b={},c=function(f,g){var h=d(g,f),i=d(h,"./index"),j,k;j=b[h]||b[i];if(j)return j;if(k=a[h]||a[h=i])return j={id:h,exports:{}},b[h]=j.exports,k(j.exports,function(a){return c(a,e(h))},j),b[h]=j.exports;throw"module "+f+" not found"},d=function(a,b){var c=[],d,e;/^\.\.?(\/|$)/.test(b)?d=[a,b].join("/").split("/"):d=b.split("/");for(var f=0,g=d.length;f<g;f++)e=d[f],e==".."?c.pop():e!="."&&e!=""&&c.push(e);return c.join("/")},e=function(a){return a.split("/").slice(0,-1).join("/")};this.require=function(a){return c(a,"")},this.require.define=function(b){for(var c in b)a[c]=b[c]},this.require.modules=a,this.require.cache=b}return this.require.define})).call(this)({game:function(a,b,c){a.Game=function(){this._board=[],this._width=7,this._height=6,this._state="pending",this._players=[];var a=this;(function b(){for(var b=0;b<a._width;b+=1){a._board[b]=[];for(var c=0;c<a._height;c+=1)a._board[b][c]=null}})()},a.Game.prototype={addPlayer:function(a){this._players.push(a)},players:function(){return this._players},winner:function(){return this._winner},board:function(){return{width:this._width,height:this._height,state:this._board.slice(),forEach:function(a){for(var b=0;b<this.width;b++)for(var c=0;c<this.height;c++)a({x:b,y:c,state:this.state[b][c]})}}},state:function(){return this._state},start:function(){if(this._players.length<2)throw new Error("not enough players");this._state=this._players[0]},place:function(a,b){if(this._state==="pending")throw new Error("Game has not started");if(this._state==="finished")throw new Error("game is over");if(this._state!==a)throw new Error("it is not "+a+"'s turn");var c=this._players.indexOf(a),d=this,e=function(){var c=0,e=d._board[b];for(;c<d._height;c++)if(e[c]===null)return e[c]=a,{x:b,y:c};throw new Error("invalid move, column full")}();return c===this._players.length-1?this._state=this._players[0]:this._state=this._players[c+1],this.hasWon(a)&&(this._state="finished",this._winner=a),e},hasWon:function(a){var b=this.board(),c={},d=function(a,b){var c=a.x+"-"+a.y;a.adjacents=[],b[c]=a},e=function(a,b){var d=[a.x+"-"+(a.y-1),a.x+1+"-"+(a.y-1),a.x+1+"-"+a.y,a.x+1+"-"+(a.y+1)];d.forEach(function(b,d){if(!c[b])return;c[b].adjacents[d]=a})},f=function h(a,b,c){var d=a.adjacents[b];return c=c||[a],d?(c.push(d),h(d,b,c)):c},g=function(a){var b=4,c=[],d,e;for(d=0;d<b;d++)e=f(a,d),c.length<e.length&&(c=e);return c};return b.forEach(function(b){b.state===a&&d(b,c)}),function(){for(var a in c)c.hasOwnProperty(a)&&e(c[a],c)}(),function(){var a,b,d;for(b in c)if(c.hasOwnProperty(b)){a=c[b],d=g(a);if(d.length===4)return!0}return!1}()}}}})